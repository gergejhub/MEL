<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/><meta http-equiv="Pragma" content="no-cache"/><meta http-equiv="Expires" content="0"/>
<title>MEL Dispatch Assistant (v3.7.1-dailyreport-pdfupload)</title>
<link rel="stylesheet" href="styles.css?v=v3.7.1-dailyreport-pdfupload"/>
</head>
<body>
<header class="topbar">
  <div class="brand"><span class="dot"></span>
    <div>
      <div class="title">MEL Dispatch Assistant <span class="ver">v3.6.1-gpslabel</span></div>
      <div class="subtitle">CSV → dispatch-releváns lajstromok → teendők • MEL-ref + MEL PDF index</div>
    </div>
  </div>
  <div class="health">
    <span id="health" class="pill">DB: …</span>
    <span id="last" class="pill pill2">Ready.</span>
  </div>
</header>

<section class="io card">
  <div class="ioRow">
    <div class="ioCol">
      <label class="lbl">CSV fájl</label>
      <input id="csvFile" type="file" accept=".csv,text/csv" class="file"/>
      <div class="hint">Drag&drop is megy.</div>
    </div>
    <div class="ioCol">
      <label class="lbl">MEL PDF feltöltés (SHA ellenőrzés)</label>
      <input id="pdfFile" type="file" accept="application/pdf" class="file"/>
      <div class="hint">A beépített index ref→title/CAT alapján működik.</div>
    </div>

    <div class="ioCol">
      <label class="lbl">Daily Report (PDF)</label>
      <input id="dailyPdf" type="file" accept="application/pdf" class="file"/>
      <div class="hint">Elsőként a böngészőben próbáljuk kinyerni a táblát (pdf.js). Ha vállalati hálózat blokkolja a worker/CDN-t, fallback: tedd fel a PDF-et a repo <span class="kbd">reports/</span> mappájába és a GitHub Actions legenerálja a JSON-t.</div>
    </div>
    <div class="ioCol">
      <label class="lbl">Daily Report (JSON)</label>
      <input id="dailyJson" type="file" accept=".json,application/json" class="file"/>
      <div class="hint">Automatikus mód: töltsd fel a napi PDF-et a repo <span class="kbd">reports/</span> mappájába → GitHub Actions legenerálja a <span class="kbd">data/daily_report.json</span>-t.</div>
    </div>

    <div class="ioCol">
      <label class="lbl">CSV beillesztés</label>
      <textarea id="csvPaste" class="ta" placeholder="Illeszd be a teljes CSV-t (headerrel)…"></textarea>
      <div class="btnRow">
        <button id="btnImportPaste" class="btn">Import</button>
        <button id="btnClear" class="btn btn-danger">Törlés</button>
        <button id="btnHandover" class="btn btn-ghost">Handover export</button>
        <button id="btnCopy" class="btn btn-ghost">Másolás</button>
      </div>
    </div>
  </div>
</section>

<main class="grid">
  <aside class="card">
    <div class="cardHead">
      <div>
        <div class="cardTitle">Dispatch-releváns repülőgépek</div>
        <div id="stats" class="cardSub">—</div>
      </div>
    </div>
    <div id="tailList" class="list empty">Tölts fel CSV-t.</div>
  </aside>

  <section class="card">
    <div class="cardHead">
      <div>
        <div id="selTitle" class="cardTitle">Teendők</div>
        <div class="cardSub">Mindig csak a kiválasztott lajstrom.</div>
      </div>
    </div>
    <div class="twoCol">
      <div class="box"><div class="boxTitle">ICAO FPL</div><div id="fplBox" class="mono muted">—</div></div>
      <div class="box"><div class="boxTitle">LIDO 4D</div><div id="lidoBox" class="mono muted">—</div></div>
    </div>
    <div class="box"><div class="boxTitle">MEL ref / Title / CAT (PDF index)</div><div id="melBox" class="mono muted">—</div></div>
    <div class="box"><div class="boxTitle">Miért kell ez? (magyarázat + forrás)</div><div id="whyBox" class="muted">—</div></div>
<div class="box"><div class="boxTitle">Operációs megjegyzések</div><div id="opsBox" class="muted">—</div></div>
    <div class="box"><div class="boxTitle">Kódok magyarázata</div><div id="glossBox" class="muted">—</div></div>
  </section>

  <aside class="card">
    <div class="cardHead"><div>
      <div class="cardTitle">Kiválasztott lajstrom – MEL tételek</div>
      <div id="selCount" class="cardSub">—</div>
    </div></div>
    <div id="itemList" class="list empty">Válassz egy lajstromot.</div>
  </aside>
</main>

<footer class="footer">Verzió: <b>v3.6.1-gpslabel</b>. Ha nem ezt látod, akkor nem a GitHub Pages által kiszolgált mappát frissítetted.</footer>
<script src="app.js?v=v3.7.1-dailyreport-pdfupload"></script>
</body>
</html>
